@if (event) {
<div class="event-detail" [class.cancelled]="isCancelled()">
    <a class="event-detail_backlink" [routerLink]="['/']">All Events</a>

    <h1>{{ event.title }}</h1>

    @if (isJoinedByMe()) {
        <div>isJoined</div>
    }

    <div class="event-detail__image _ibg">
        @if (event.imgUrls && event.imgUrls[0]) {
        <img [src]="event.imgUrls[0]" [alt]="event.title" class="event-detail__avatar">
        } @else {
        <img src="https://picsum.photos/id/158/200/300?blur=1" alt="default event picture" class="event-detail__avatar">
        }


        <app-event-participants-number-label [participantsNum]="participantsNum()"></app-event-participants-number-label>
    </div>

    <div class="event-detail__main">
        <p>{{ event.description }}</p>
        <div class="event-detail__location _before-icon">{{event.location}}</div>
        <div class="event-detail__date _before-icon">{{event.date}}</div>
        <div class="event-detail__time _before-icon">{{event.time.slice(0, 5)}} Uhr</div>

        <div class="event-detail__dash">


            @if (me(); as me) {

            <app-favorite-button
                *ngIf="authService.isUser"
                [eventId]="event.id"
                [userId]="me.id"
            >
            </app-favorite-button>

            <app-join-button
                *ngIf="authService.isUser"
                [eventId]="event.id"
                [userId]="me.id"
                [username]="me.username"
                [participantsNum]="participantsNum" 
                [isJoinedByMe]="isJoinedByMe" 
            >
            </app-join-button>


            @if (me.id === event.createdBy) {

            <button class="event-detail__edit btn-icon _ibg">
                <img src="/assets/svg/edit.svg" alt="icon edit">
            </button>

            <app-delete-event-button [eventId]="event.id"></app-delete-event-button>

            <app-toogle-event-cancelled [eventId]="event.id" [isCancelled]="isCancelled" ></app-toogle-event-cancelled>
            }
            
            }
        </div>

        @if (me(); as me) {

            @if (me.id === event.createdBy) {
                <div class="event-detail__participants">
                    <ul>
                            @if (participants(); as participants) {

                                @for (participant of participants; track participant.id) {
                                    <li>{{participant.username}}</li>
                                }

                            }
                    </ul>
                </div>
            }
        }

    </div>
</div>
}