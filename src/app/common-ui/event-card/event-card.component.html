@if (event) {
    <li class="event-card" [class.cancelled]="isCancelled()">

        <a [routerLink]="['/events', event.id]" class="event-card__image _ibg">
            @if (event.imgUrls && event.imgUrls[0]) {
                <img
                [src]="event.imgUrls[0]"
                [alt]="event.title"
                class="event-card__avatar">
            } @else {
                <img
                src="https://picsum.photos/id/158/200/300?blur=1"
                alt="default event picture"
                class="event-card__avatar">
            }

            <app-event-participants-number-label [participantsNum]="0"></app-event-participants-number-label>
        </a>

        <div class="event-card__main">
            <a [routerLink]="['/events', event.id] ">
                <h2 class="event-card__title">{{event.title}}</h2>
            </a>
            <div class="event-card__location _before-icon">{{event.location}}</div>
            <div class="event-card__date _before-icon">{{event.date}}</div>
            <div class="event-card__time _before-icon">{{event.time.slice(0, 5)}} Uhr</div>

            <div class="event-card__dash">

                @if (me(); as me) {

                    <app-favorite-button
                        *ngIf="authService.isUser"
                        [eventId]="event.id"
                        [userId]="me.id">
                    </app-favorite-button>

                    <app-join-button
                        *ngIf="authService.isUser"
                        [eventId]="event.id"
                        [userId]="me.id"
                        [participantsNum]="participantsNum" 
                        [isJoinedByMe]="isJoinedByMe" 
                    >
                    </app-join-button>

                    @if (me.id === event.createdBy) {
                        <button class="event-card__edit btn-icon">
                            <div class="_ibg">
                                <img src="/assets/svg/edit.svg" alt="icon edit">
                            </div>
                            <span>Edit</span>
                        </button>
                        <button class="event-card__del btn-icon" (click)="deleteEvent()">
                            <div class="_ibg">
                                <img src="/assets/svg/bin.svg" alt="icon delete">
                            </div>
                            <span>Delete</span>
                        </button>
                    }
                }
            </div>        
        </div>
    </li>
}
